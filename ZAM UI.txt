local Library = {}

function Library.new(title)
    -- [Previous window creation code]

    local Tabs = {}
    local CurrentTab = nil

    -- Create tab container
    local TabContainer = Instance.new("Frame")
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = Main
    TabContainer.BackgroundTransparency = 1
    TabContainer.Position = UDim2.new(0, 10, 0, 40)
    TabContainer.Size = UDim2.new(1, -20, 0, 30)

    -- Create content container
    local ContentContainer = Instance.new("Frame")
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Parent = Main
    ContentContainer.BackgroundTransparency = 1
    ContentContainer.Position = UDim2.new(0, 10, 0, 80)
    ContentContainer.Size = UDim2.new(1, -20, 1, -90)

    local Window = {}

    function Window:CreateTab(name)
        local Tab = {}
        local TabButton = Instance.new("TextButton")
        local TabContent = Instance.new("Frame")
        
        -- Create tab button
        TabButton.Name = name .. "Button"
        TabButton.Parent = TabContainer
        TabButton.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
        TabButton.Size = UDim2.new(0, 100, 1, 0)
        TabButton.Position = UDim2.new(0, #Tabs * 105, 0, 0)
        TabButton.Text = name
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.Font = Enum.Font.GothamSemibold
        TabButton.TextSize = 14
        
        -- Add corner
        local Corner = Instance.new("UICorner")
        Corner.CornerRadius = UDim.new(0, 6)
        Corner.Parent = TabButton
        
        -- Create tab content
        TabContent.Name = name .. "Content"
        TabContent.Parent = ContentContainer
        TabContent.BackgroundTransparency = 1
        TabContent.Size = UDim2.new(1, 0, 1, 0)
        TabContent.Visible = false
        
        -- Create content layout
        local Layout = Instance.new("UIListLayout")
        Layout.Parent = TabContent
        Layout.Padding = UDim.new(0, 5)
        Layout.SortOrder = Enum.SortOrder.LayoutOrder

        -- Tab button click handler
        TabButton.MouseButton1Click:Connect(function()
            if CurrentTab then
                CurrentTab.Visible = false
            end
            TabContent.Visible = true
            CurrentTab = TabContent
        end)
        
        -- Show first tab by default
        if #Tabs == 0 then
            TabContent.Visible = true
            CurrentTab = TabContent
        end
        
        -- Add tab functions
        function Tab:AddButton(text, callback)
            local Button = Instance.new("TextButton")
            Button.Name = text .. "Button"
            Button.Parent = TabContent
            Button.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
            Button.Size = UDim2.new(1, 0, 0, 35)
            Button.Text = text
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.Font = Enum.Font.GothamSemibold
            Button.TextSize = 14
            
            local Corner = Instance.new("UICorner")
            Corner.CornerRadius = UDim.new(0, 6)
            Corner.Parent = Button
            
            Button.MouseButton1Click:Connect(callback)
            return Button
        end
        
        function Tab:AddToggle(text, default, callback)
            local Toggle = Instance.new("TextButton")
            Toggle.Name = text .. "Toggle"
            Toggle.Parent = TabContent
            Toggle.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
            Toggle.Size = UDim2.new(1, 0, 0, 35)
            Toggle.Text = text
            Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
            Toggle.Font = Enum.Font.GothamSemibold
            Toggle.TextSize = 14
            
            local Corner = Instance.new("UICorner")
            Corner.CornerRadius = UDim.new(0, 6)
            Corner.Parent = Toggle
            
            local State = default or false
            
            local Indicator = Instance.new("Frame")
            Indicator.Name = "Indicator"
            Indicator.Parent = Toggle
            Indicator.BackgroundColor3 = State and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
            Indicator.Position = UDim2.new(1, -35, 0.5, -8)
            Indicator.Size = UDim2.new(0, 16, 0, 16)
            
            local IndicatorCorner = Instance.new("UICorner")
            IndicatorCorner.CornerRadius = UDim.new(1, 0)
            IndicatorCorner.Parent = Indicator
            
            Toggle.MouseButton1Click:Connect(function()
                State = not State
                Indicator.BackgroundColor3 = State and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
                callback(State)
            end)
            
            return Toggle
        end
        
        table.insert(Tabs, Tab)
        return Tab
    end

    return Window
end

return Library
